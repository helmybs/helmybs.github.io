<div class="container">
  <h2>Kelola Stok</h2>
  <table id="stockTable" class="table">
    <thead>
      <tr>
        <th>Kode</th>
        <th>Nama</th>
        <th>Stok</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody>
      <!-- Diisi via JavaScript -->
    </tbody>
  </table>
</div>

<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
<script src="../assets/js/firebase-config.js"></script>
<script>
  // Load data stok
  db.collection('products').onSnapshot((snapshot) => {
    const tableBody = document.getElementById('stockTable').querySelector('tbody');
    tableBody.innerHTML = '';
    
    snapshot.forEach(doc => {
      const product = doc.data();
      const row = `
        <tr>
          <td>${doc.id}</td>
          <td>${product.name}</td>
          <td>${product.stock}</td>
          <td>
            <button onclick="updateStock('${doc.id}', 1)">+</button>
            <button onclick="updateStock('${doc.id}', -1)">-</button>
          </td>
        </tr>
      `;
      tableBody.innerHTML += row;
    });
  });

  // Fungsi update stok
  window.updateStock = async (code, change) => {
    await db.collection('products').doc(code).update({
      stock: firebase.firestore.FieldValue.increment(change)
    });
  };
</script>