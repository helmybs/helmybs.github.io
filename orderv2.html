<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form XL AKRAB</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <h2>Form Pemesanan XL AKRAB</h2>
  <form>
    <div class="form-group">
      <label for="phone"><i class="fa fa-phone"></i> Nomor HP</label>
      <input type="number" class="form-control" id="phone" placeholder="Contoh: 628xxxxxxx">
    </div>

    <div class="form-group">
      <label for="product"><i class="fa fa-bolt"></i> Pilih Kuota</label>
      <select class="form-control" id="product">
        <option value="">-- Pilih Kuota --</option>
        <option value="RES60 | OFFICIAL AKRAB XL | Rp. 60.000">OFFICIAL AKRAB XL REWARDS [Rp 60.000]</option>
        <option value="RES75 | OFFICIAL AKRAB XXL | Rp. 75.000">OFFICIAL AKRAB XXL REWARDS [Rp 75.000]</option>
        <option value="RES95 | OFFICIAL AKRAB XXL | Rp. 95.000">OFFICIAL AKRAB XXL REWARDS [Rp 95.000]</option>
        <option value="RES105 | OFFICIAL AKRAB XXL | Rp. 105.000">OFFICIAL AKRAB XXL REWARDS [Rp 105.000]</option>
        <option value="RES115 | OFFICIAL AKRAB XXL | Rp. 115.000">OFFICIAL AKRAB XXL REWARDS [Rp 115.000]</option>
        <option value="BP150 | Rp. 150.000">OFFICIAL BEBAS PUAS 234-270GB [ALL NASIONAL]</option>
      </select>
      <div id="totalBayar" class="text-info mt-2" style="margin-top: 10px;"></div>
    </div>

    <div class="form-group">
      <label for="description"><i class="fa fa-info-circle"></i> Detail Paket</label>
      <textarea class="form-control" id="description" rows="6" readonly></textarea>
    </div>

    <div id="text-info"></div>

    <button type="button" class="btn btn-primary" id="bayarQris"><i class="fa fa-qrcode"></i> BAYAR QRIS</button>
    <button type="button" class="btn btn-info" data-toggle="modal" data-target="#exampleModalLong"><i class="fa fa-search"></i> CEK AREA</button>
  </form>
</div>

<!-- Modal CEK AREA -->
<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">DAFTAR AREA AKRAB</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <p>Silakan cek daftar area sesuai lokasi kamu di sini...</p>
        <ul>
          <li>Area 1: Jawa Tengah</li>
          <li>Area 2: Jakarta & Sekitarnya</li>
          <li>Area 3: Sumatera</li>
          <li>Area 4: Kalimantan, Sulawesi, Papua</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Modal QRIS -->
<div class="modal fade" id="modalQris" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Pembayaran QRIS</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body text-center">
        <img src="https://via.placeholder.com/300x300.png?text=QRIS" alt="QRIS" class="img-responsive center-block" style="max-width: 100%; height: auto;">
        <h4 id="qrisProduct" class="mt-3"></h4>
        <h4 id="qrisTotal" class="text-primary"></h4>
        <button id="konfirmasiBayarQris" class="btn btn-success mt-3">Konfirmasi via WhatsApp</button>
      </div>
    </div>
  </div>
</div>

<script>
$(document).ready(function () {
  const descriptions = [
    "AREA 1: 33.5-36GB\nAREA 2: 36.5-40GB\nAREA 3: 47-50GB\nAREA 4: 71-74GB\n\n✅ Resmi bergaransi\n✅ Full 24 jam\n✅ Tambah masa aktif 30 hari",
    "AREA 1: 65.5-67.5GB\nAREA 2: 70-72GB\nAREA 3: 83-85GB\nAREA 4: 123-125GB\n\n✅ Resmi bergaransi\n✅ Full 24 jam\n✅ Tambah masa aktif 30 hari",
    "AREA 1: 85.5-87.5GB\nAREA 2: 90-92GB\nAREA 3: 103-105GB\nAREA 4: 143-145GB\n\n✅ Resmi bergaransi\n✅ Full 24 jam\n✅ Tambah masa aktif 30 hari",
    "AREA 1: 105.5-107.5GB\nAREA 2: 110-112GB\nAREA 3: 123-125GB\nAREA 4: 163-165GB\n\n✅ Resmi bergaransi\n✅ Full 24 jam\n✅ Tambah masa aktif 30 hari",
    "AREA 1: 125.5-127.5GB\nAREA 2: 130-132GB\nAREA 3: 153-155GB\nAREA 4: 183-185GB\n\n✅ Resmi bergaransi\n✅ Full 24 jam\n✅ Tambah masa aktif 30 hari",
    "234GB Full Nasional + Kuota Area + Bonus.\nAMBIL BONUS DI MY XL."
  ];

  $("#product").on("change", function () {
    const index = $("#product").prop("selectedIndex") - 1;
    const val = $(this).val();
    const match = val.match(/Rp\.\s?([\d.]+)/);
    if (match) {
      const total = parseInt(match[1].replace(/\./g, ""));
      const formatted = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR' }).format(total);
      $("#totalBayar").text("Total Bayar: " + formatted);
    } else {
      $("#totalBayar").text("");
    }

    $("#description").val(index >= 0 ? descriptions[index] : "");
  });

  $("#bayarQris").click(function () {
    const phone = $("#phone").val();
    const product = $("#product").val();
    const match = product.match(/Rp\.\s?([\d.]+)/);
    const harga = match ? parseInt(match[1].replace(/\./g, '')) : 0;
    const formatted = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR' }).format(harga);

    if (!phone || !product) {
      alert("Silakan isi nomor dan pilih kuota.");
      return;
    }

    $("#qrisProduct").text(product);
    $("#qrisTotal").text("Total: " + formatted);
    $('#modalQris').modal('show');
  });

  $("#konfirmasiBayarQris").click(function () {
    const phone = $("#phone").val();
    const product = $("#product").val();
    const match = product.match(/Rp\.\s?([\d.]+)/);
    const harga = match ? parseInt(match[1].replace(/\./g, '')) : 0;
    const formatted = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR' }).format(harga);

    const pesan = `*KONFIRMASI BAYAR QRIS*%0A%0A*Nomor:* ${phone}%0A*Paket:* ${product}%0A*Total:* ${formatted}%0A%0A*Berikut bukti bayar QRIS-nya ya bang.*`;
    const url = `https://wa.me/6283842915722?text=${encodeURIComponent(pesan)}`;
    window.open(url, '_blank');
  });
});
</script>

</body>
</html>
